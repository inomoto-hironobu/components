<!DOCTYPE html>
<html>
<head>
<title>basic.jsのテスト</title>
<meta name="description" content="test">
<link rel="yaohata-components-location" href="../"/>
</head>
<body>
<p><internal-quote path="a.html" target="test"/></p>
<p id="test">test</p>

<window-def name="test" value="value"></window-def>

<window-def name="test2" type="dom"><div>value</div></window-def>

<window-def name="test3"><div>value</div></window-def>

<window-ref name="test"></window-ref>

<window-ref name="test2"></window-ref>

<x-path>
$self/text()
</x-path>

<window-def name="add" type="string">
number($self/parent::*/preceding-sibling::td[2]/text()) + number($self/parent::*/preceding-sibling::td[1]/text())
</window-def>
<table>
<tr>
    <td>1</td>
    <td>10</td>
    <td><x-path ref="add"></x-path></td>
    <td><x-path>2*number($self/parent::*/preceding-sibling::td[1]/x-path/result/text())</x-path></td>
</tr>
<tr>
    <td>2</td>
    <td>30</td>
    <td><x-path ref="add"></x-path></td>
    <td><x-path>2*number($self/parent::*/preceding-sibling::td[1]/x-path/result/text())</x-path></td>
</tr>
<tr><td><x-path>
    $self/parent::*/parent::*/preceding-sibling::tr/td[1]
=>sum()
</x-path></td>
<td><x-path>
    $self/parent::*/parent::*/preceding-sibling::tr/td[2]
=>sum()
</x-path></td><td><x-path>
    $self/parent::*/parent::*/preceding-sibling::tr/td[3]//result
=>sum()
</x-path>
<td><x-path>
    $self/parent::*/parent::*/preceding-sibling::tr/td[4]//result
=>sum()
</x-path></td></td>
</tr>
</table>

<the-if xpath=""></the-if>

<json-loop path="test.json">
<div><val xpath=""/></div>
</json-loop>

<the-template >
<text name="test">md-4</text>
<param name="test2"/>
<span slot="slot">test</span>
</the-template>

<saxon-transform stylesheet="" source="">
<param name="" value=""/>
</saxon-transform>

<framexs-transform skeleton="" contents="">
<property name="" value=""/>
</framexs-transform>

<the-youtube code="iRdsHFP1PWU"></the-youtube>

<universal-template template="youtube">
<param name="code" type="text"></param>
</universal-template>

<template id="quote">
<description/>
</template>

<template>
<div yc:class="col {test}">
<yc:val name="test2"/>
<slot name="slot">defa</slot>
</div>
</template>
<p><meta-content name="description"/></p>
<p><meta-content name="description" path="a.html"/></p>
<p><internal-fetch path="a.html" template="link" target="test"/></p>
<p><internal-link path="a.html"/></p>
<p><internal-quote path="a.html" target="test"/></p>
<xpath-value>
//p => count()
</xpath-value>
<br/>
<json-loop path="test.json" xpath="?array">
<div class="test"><val xpath="?num"/></div>
<div><val xpath="?val"></div>
</json-loop>
<br/>
<xpath-value>
//meta[@name = 'description']/@content => string()
</xpath-value>
<json-data>
[
    {"test":"test"},
    {"test2":"test2"}
]
</json-data>
<template id="link">
<a yc:href="{path}" yc:title="{title}"><yc:title/></a>
</template>
<template id="quote">
<div>
<yc:content/>
</div>
</template>

<window-def name="test" value="value"></window-def>
<pre id="code1"><code class="language json">
{
    "test":"val",
    "arr":[
        {
            "n":"v1",
            "n2":1
        },
        {
            "n":"v2",
            "n2":2
        },
        {
            "n":"v3",
            "n2":3
        }
    ],
    "map":{
        "test2":"test"
    }
}
</code></pre>
<window-def name="json" type="string" ref="code1"></window-def>

<pre id="code2"><code class="language xpath">
    let $json := parse-json($defs?json)
    return $json?arr?*[?n2 >= 2]?n
</code></pre>

<console-log type="xpath" ref="code2"></console-log>

<console-log type="xpath">parse-json($defs?json)?arr?*[?n2=1]</console-log>

<console-log type="xpath">
parse-json($defs?json)?arr?*[?n2>1]?n
</console-log>

<console-log type="xpath">
parse-json($defs?json)?*[. instance of map(*) and ?test2]?test2
</console-log>

<window-def name="add" type="string">
number($self/parent::*/preceding-sibling::td[2]/text()) + number($self/parent::*/preceding-sibling::td[1]/text())
</window-def>

<window-lib path="lib.html"></window-lib>
<table>
<tr>
    <td>1</td>
    <td>10</td>
    <td><x-path ref="add"></x-path></td>
    <td><x-path>2*number($self/parent::*/preceding-sibling::td[1]/x-path/result/text())</x-path></td>
</tr>
<tr>
    <td>2</td>
    <td>30</td>
    <td><x-path ref="add"></x-path></td>
    <td><x-path>2*number($self/parent::*/preceding-sibling::td[1]/x-path/result/text())</x-path></td>
</tr>
<tr><td><x-path>
    $self/parent::*/parent::*/preceding-sibling::tr/td[1]
=>sum()
</x-path></td>
<td><x-path>
    $self/parent::*/parent::*/preceding-sibling::tr/td[2]
=>sum()
</x-path></td><td><x-path>
    $self/parent::*/parent::*/preceding-sibling::tr/td[3]//result
=>sum()
</x-path>
<td><x-path>
    $self/parent::*/parent::*/preceding-sibling::tr/td[4]//result
=>sum()
</x-path></td></td>
</tr>
</table>
<script src="../lib/SaxonJS2.js"></script>
<script src="../basic.js"></script>
</body>
</html>